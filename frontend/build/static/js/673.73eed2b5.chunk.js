"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[673],{58246:(e,t,r)=>{r.d(t,{Z:()=>Z});var n=r(72791),i=r(697),o=r(29472),a=r(36314),s=r(93044),l=r(20890),c=r(66934),d=r(13967),p=r(12065),h=r(59434),u=r(55613);const x=e=>("0"+e).slice(-2);function g(e){let t=new Date(e),r=new Date;r=new Date(r.toDateString());let n=(new Date).setDate(r.getDate()-1);return t>r?(e=>{let t=e.getHours(),r=e.getMinutes();return x(t)+":"+x(r)})(t):t>n?"Yesterday":t.getDate()+"/"+t.getMonth()+"/"+t.getFullYear().toString().substring(2,4)}var m=r(71498),f=r(94984),v=r(80184);const j=(0,c.ZP)(i.Z)((e=>{let{theme:t}=e;return{"&:hover":{cursor:"pointer"}}})),b=(0,c.ZP)(o.Z)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),Z=e=>{var t,r,i,o,c,x,Z;let{_id:w,users:C,latestMessage:y,isGroupChat:k,chatName:I}=e;const S=(0,h.I0)(),{chat_id:N}=(0,h.v9)((e=>e.app)),{_id:P}=(0,h.v9)((e=>e.app.user));let R=N===w;N||(R=!1),(0,n.useEffect)((()=>{}),[N,y]);const F=(0,d.Z)();return(0,v.jsx)(j,{onClick:()=>{m.W.emit("leave chat",N),S((0,u.ND)({chat_id:w,isGroupChat:k})),m.W.emit("join chat",w),m.W.on("connected",(()=>{console.log("Socket Connected"),S((0,f.h7)(!0))}))},sx:{width:"100%",borderRadius:1,backgroundColor:R?"light"===F.palette.mode?(0,p.Fq)(F.palette.primary.main,.5):F.palette.primary.main:"light"===F.palette.mode?"#fff":F.palette.background.paper},p:2,children:(0,v.jsxs)(a.Z,{direction:"row",alignItems:"flex-end",justifyContent:"space-between",children:[(0,v.jsxs)(a.Z,{direction:"row",spacing:2,children:[" ",k?(0,v.jsx)(s.Z,{alt:I,src:""}):"online"===(null===(t=C[0])||void 0===t?void 0:t.status)?(0,v.jsx)(b,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,v.jsx)(s.Z,{alt:null===(r=C[0])||void 0===r?void 0:r.firstName,src:null===(i=C[0])||void 0===i?void 0:i.avatar})}):(0,v.jsx)(s.Z,{alt:null===(o=C[0])||void 0===o?void 0:o.firstName,src:null===(c=C[0])||void 0===c?void 0:c.avatar}),(0,v.jsxs)(a.Z,{children:[k?(0,v.jsx)(l.Z,{variant:"subtitle2",children:I}):(0,v.jsx)(l.Z,{variant:"subtitle2",children:(null===(x=C[0])||void 0===x?void 0:x.firstName)+" "+(null===(Z=C[0])||void 0===Z?void 0:Z.lastName)}),(0,v.jsxs)(a.Z,{direction:"row",spacing:.5,children:[(0,v.jsx)(l.Z,{variant:"caption",sx:{fontWeight:"600"},children:y?y.sender._id===P?"You: ":"".concat(y.sender.firstName.trim(),": "):""}),(0,v.jsx)(l.Z,{variant:"caption",sx:{fontWeight:"500"},children:y?(D=y.content,G=20,(null===D||void 0===D?void 0:D.length)>G?"".concat(null===D||void 0===D?void 0:D.slice(0,G),"..."):D):""})]})]})]}),(0,v.jsx)(a.Z,{spacing:2,alignItems:"end",direction:"column",children:(0,v.jsx)(l.Z,{sx:{fontWeight:600},variant:"caption",children:y?g(y.createdAt):""})})]})});var D,G}},53614:(e,t,r)=>{r.d(t,{ol:()=>o,cB:()=>a,el:()=>l});var n=r(66934),i=r(12065);const o=(0,n.ZP)("div")((e=>{let{theme:t}=e;return{position:"relative",borderRadius:20,backgroundColor:(0,i.Fq)(t.palette.background.paper,1),marginRight:t.spacing(2),marginLeft:0,width:"100%"}})),a=(0,n.ZP)("div")((e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}));var s=r(4834);const l=(0,n.ZP)(s.ZP)((e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),width:"100%"}}}))},6522:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(61134),i=r(80184);function o(e){let{children:t,onSubmit:r,methods:o}=e;return(0,i.jsx)(n.RV,{...o,children:(0,i.jsx)("form",{onSubmit:r,children:t})})}},11892:(e,t,r)=>{r.d(t,{au:()=>w,sX:()=>j,ZP:()=>b.Z});var n=r(61134),i=r(47071),o=r(72791),a=r(87087),s=r(697),l=r(80184);const c=(0,o.forwardRef)(((e,t)=>{let{disabledEffect:r=!1,effect:n="blur",sx:i,...o}=e;const c=(0,l.jsx)(s.Z,{component:a.LazyLoadImage,wrapperClassName:"wrapper",effect:r?void 0:n,placeholderSrc:r?"/assets/transparent.png":"/assets/placeholder.svg",sx:{width:1,height:1,objectFit:"cover"},...o});return(0,l.jsx)(s.Z,{ref:t,component:"span",sx:{lineHeight:1,display:"block",overflow:"hidden",position:"relative","& .wrapper":{width:1,height:1,backgroundSize:"cover !important"},...i},children:c})}));function d(e){let{file:t}=e;if(!t)return null;const r="string"===typeof t?t:t.preview;return(0,l.jsx)(c,{alt:"avatar",src:r,sx:{zIndex:8,overflow:"hidden",borderRadius:"50%",position:"absolute",width:"calc(100% - 16px)",height:"calc(100% - 16px)"}})}var p=r(18267),h=r(20890),u=r(66934),x=r(12065),g=r(76526);const m=(0,u.ZP)("div")((e=>{let{theme:t}=e;return{width:144,height:144,margin:"auto",display:"flex",cursor:"pointer",overflow:"hidden",borderRadius:"50%",alignItems:"center",position:"relative",justifyContent:"center",border:"1px dashed ".concat((0,x.Fq)(t.palette.grey[500],.32))}})),f=(0,u.ZP)("div")((e=>{let{theme:t}=e;return{zIndex:7,display:"flex",borderRadius:"50%",position:"absolute",alignItems:"center",flexDirection:"column",justifyContent:"center",width:"calc(100% - 16px)",height:"calc(100% - 16px)",color:t.palette.text.disabled,backgroundColor:t.palette.background.neutral,transition:t.transitions.create("opacity",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter})}}));function v(e){let{error:t,file:r,disabled:n,helperText:i,sx:o,...a}=e;const{getRootProps:s,getInputProps:c,isDragActive:u,isDragReject:v}=(0,p.uI)({multiple:!1,disabled:n,...a}),j=!!r,b=v||!!t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(m,{...s(),sx:{...u&&{opacity:.72},...b&&{borderColor:"error.light",...j&&{bgcolor:"error.lighter"}},...n&&{opacity:.48,pointerEvents:"none"},...j&&{"&:hover":{"& .placeholder":{opacity:1}}},...o},children:[(0,l.jsx)("input",{...c()}),j&&(0,l.jsx)(d,{file:r}),(0,l.jsxs)(f,{className:"placeholder",sx:{"&:hover":{opacity:.72},...j&&{zIndex:9,opacity:0,color:"common.white",bgcolor:e=>(0,x.Fq)(e.palette.grey[900],.64)},...b&&{color:"error.main",bgcolor:"error.lighter"}},children:[(0,l.jsx)(g.Z,{}),(0,l.jsx)(h.Z,{variant:"caption",children:r?"Update photo":"Upload photo"})]})]}),i&&i]})}function j(e){let{name:t,...r}=e;const{control:o}=(0,n.Gc)();return(0,l.jsx)(n.Qr,{name:t,control:o,render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)(v,{accept:{"image/*":[]},error:!!n,file:t.value,...r}),!!n&&(0,l.jsx)(i.Z,{error:!0,sx:{px:2,textAlign:"center"},children:n.message})]})}})}var b=r(6522),Z=r(43138);function w(e){let{name:t,helperText:r,...i}=e;const{control:o}=(0,n.Gc)();return(0,l.jsx)(n.Qr,{name:t,control:o,render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,l.jsx)(Z.Z,{...t,fullWidth:!0,value:"number"===typeof t.value&&0===t.value?"":t.value,error:!!n,helperText:n?null===n||void 0===n?void 0:n.message:r,...i})}})}},41036:(e,t,r)=>{r.d(t,{Z:()=>u});r(72791);var n=r(13967),i=r(697),o=r(36314),a=r(13400),s=r(6842),l=r(15122),c=r(59434),d=r(55613),p=r(57689),h=r(80184);const u=()=>{const e=(0,n.Z)(),t=(0,p.s0)(),r=(0,c.I0)(),{tab:u}=(0,c.v9)((e=>e.app));return(0,h.jsx)(i.Z,{sx:{zIndex:10,position:"absolute",bottom:0,width:"100vw",backgroundColor:e.palette.background.paper,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:(0,h.jsxs)(o.Z,{sx:{width:"100%"},direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,p:2,children:[l.u5.map((n=>n.index===u?(0,h.jsx)(i.Z,{sx:{backgroundColor:e.palette.primary.main,borderRadius:1.5},p:1,children:(0,h.jsx)(a.Z,{sx:{width:"max-content",color:"#ffffff"},children:n.icon})}):(0,h.jsx)(a.Z,{onClick:()=>{var e;2!==(e=n.index)?(r((0,d.Tn)({tab:e})),t((e=>{switch(e){case 0:return"/app";case 1:return"/group";case 2:return"/call";case 3:return"/settings"}})(e))):r((0,d.OV)({severity:"info",message:"Feature Under Construction"}))},sx:{width:"max-content",color:"light"===e.palette.mode?"#080707":e.palette.text.primary},children:n.icon}))),(0,h.jsx)(s.Z,{})]})})}},20673:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M});var n=r(72791),i=r(697),o=r(36314),a=r(20890),s=r(13400),l=r(57320),c=r(40703),d=r(13967),p=(r(27578),r(15122),r(58246)),h=r(53614),u=r(81724),x=r(55931),g=r(93044),m=r(82880),f=r(5289),v=r(65661),j=r(39157),b=r(44695),Z=r(61134),w=r(6522),C=r(11892),y=r(92438),k=r(43138),I=r(80184);function S(e){let{name:t,label:r,helperText:n,...i}=e;const{control:o,setValue:a}=(0,Z.Gc)();return(0,I.jsx)(Z.Qr,{name:t,control:o,render:e=>{let{field:o,fieldState:{error:s}}=e;return(0,I.jsx)(y.Z,{...o,onChange:(e,r)=>a(t,r,{shouldValidate:!0}),renderInput:e=>(0,I.jsx)(k.Z,{label:r,error:!!s,helperText:s?null===s||void 0===s?void 0:s.message:n,...e}),...i})}})}var N=r(59434),P=r(55613),R=r(66934),F=r(57689);const D=(0,R.ZP)(i.Z)((e=>{let{theme:t}=e;return{"&:hover":{cursor:"pointer"}}})),G=n.forwardRef((function(e,t){return(0,I.jsx)(x.Z,{direction:"up",ref:t,...e})})),T=e=>{let{handleClose:t}=e;const r=u.Ry().shape({title:u.Z_().required("Title is required"),members:u.IX().min(2,"Must have at least 2 members")}),i=(0,N.I0)(),{users:s}=(0,N.v9)((e=>e.app)),l=(0,F.s0)(),c=(0,d.Z)();(0,n.useEffect)((()=>{i((0,P.j4)())}),[]);const p=(0,Z.cI)({resolver:(0,b.X)(r),defaultValues:{title:"",tags:[]}}),{reset:h,watch:x,setValue:f,handleSubmit:v,formState:{isSubmitting:j,isValid:y}}=p;return(0,I.jsx)(w.Z,{methods:p,onSubmit:v((async e=>{try{await i((0,P.oP)({data:e})).then(t()).then(l("/group"))}catch(r){console.error(r)}})),children:(0,I.jsxs)(o.Z,{spacing:3,children:[(0,I.jsx)(C.au,{name:"title",label:"Title"}),(0,I.jsx)(S,{name:"members",label:"Members",multiple:!0,freeSolo:!0,options:s,list:s,getOptionLabel:e=>"".concat(e.firstName," ").concat(e.lastName),renderOption:(e,t,r)=>{let{selected:n}=r;return(0,I.jsx)("li",{...e,children:(0,I.jsx)(D,{sx:{width:"100%",borderRadius:1,backgroundColor:c.palette.background.paper},p:1,children:(0,I.jsx)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:(0,I.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:2,children:[" ",(0,I.jsx)(g.Z,{alt:t.firstName+" "+t.lastName,src:t.avatar}),(0,I.jsx)(o.Z,{spacing:.3,children:(0,I.jsx)(a.Z,{variant:"subtitle2",children:t.firstName+" "+t.lastName})})]})})})})},ChipProps:{size:"medium"}}),(0,I.jsxs)(o.Z,{spacing:2,direction:"row",alignItems:"center",justifyContent:"end",children:[(0,I.jsx)(m.Z,{onClick:t,children:"Cancel"}),(0,I.jsx)(m.Z,{type:"submit",variant:"contained",children:"Create"})]})]})})},E=e=>{let{open:t,handleClose:r}=e;return(0,I.jsxs)(f.Z,{fullWidth:!0,maxWidth:"xs",open:t,TransitionComponent:G,keepMounted:!0,onClose:r,"aria-describedby":"alert-dialog-slide-description",sx:{p:4},children:[(0,I.jsx)(v.Z,{children:"Create New Group"}),(0,I.jsx)(j.Z,{sx:{mt:4},children:(0,I.jsx)(T,{handleClose:r})})]})};var W=r(29998),z=r(41036);const M=()=>{const e=(0,d.Z)(),t=(0,W.Z)("up","md"),r=(0,N.I0)(),{chats:u}=(0,N.v9)((e=>e.app));(0,n.useEffect)((()=>{r((0,P.dv)()),r((0,P.Tn)({tab:1}))}),[]),(0,n.useEffect)((()=>{}),[u]);const[x,g]=(0,n.useState)(!1);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(i.Z,{sx:{position:"relative",height:"100%",width:t?320:"100vw",backgroundColor:"light"===e.palette.mode?"#F8FAFF":e.palette.background,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:[!t&&(0,I.jsx)(z.Z,{}),(0,I.jsxs)(o.Z,{p:3,pr:1.5,spacing:2,sx:{maxHeight:"100vh",height:"100%"},children:[(0,I.jsxs)(o.Z,{alignItems:"center",justifyContent:"space-between",direction:"row",pr:1.5,children:[(0,I.jsx)(a.Z,{variant:"h5",children:"Groups"}),(0,I.jsx)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,I.jsx)(s.Z,{onClick:()=>{g(!0)},sx:{width:"max-content"},children:(0,I.jsx)(l.Z,{})})})]}),(0,I.jsx)(o.Z,{sx:{width:"100%",height:"auto"},pr:1.5,children:(0,I.jsxs)(h.ol,{children:[(0,I.jsx)(h.cB,{children:(0,I.jsx)(c.Z,{color:"#709CE6"})}),(0,I.jsx)(h.el,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})}),(0,I.jsx)(o.Z,{sx:{flexGrow:1,overflowY:"scroll",height:"100%"},pr:.5,children:(0,I.jsxs)(o.Z,{spacing:1,children:[(0,I.jsx)(a.Z,{variant:"subtitle2",sx:{color:"#676667"},children:"All Groups"}),u.filter((e=>e.isGroupChat)).map(((e,t)=>(0,n.createElement)(p.Z,{...e,key:t})))]})})]})]}),x&&(0,I.jsx)(E,{open:x,handleClose:()=>{g(!1)}})]})}}}]);
//# sourceMappingURL=673.73eed2b5.chunk.js.map